import goldfinder

results = {
    'marx': [
        {
            'collection': 'Stacks',
            'call': 'B3305.M74 C56 2004',
            'author': 'Collier, Andrew 1944-',
            'details': '',
            'directions': {
                'floor': 'M',
                'building': 'Goldfarb',
                'aisle': '3a',
            },
            'library': 'Main Library',
            'title': 'Marx',
            'year': 'c2004',
        }
    ], 'NK3634.A2 C4566 1999': [
        {
            'author': 'Cary Y Liu (Cary Yee-Wei), '
            '1955-; Dora C. Y Ching; Judith '
            'G. Smith 1941-; Princeton '
            'University. Art Museum',
            'call': 'NK3634.A2 C4566 1999',
            'collection': 'Stacks',
            'details': '',
            'directions': {
                'aisle': '36b',
                'building': 'Farber',
                'floor': 4
            },
            'library': 'Main Library',
            'title': 'Character & context in Chinese '
            'calligraphy',
            'year': 'c1999'
    }], 'PJ7745.I155 F313 1978': [
        {
            'author': 'Ibn al-Marzubān, Muḥammad ibn '
            'Khalaf d. 921 or 2. ; G. R '
            'Smith; Muḥammad ʻAbd al-Ḥalīm',
            'call': 'PJ7745.I155 F313 1978',
            'collection': 'Stacks',
            'details': '',
            'directions': {
                'aisle': '18b',
                'building': 'Goldfarb',
                'floor': 'M'
            },
            'library': 'Main Library',
            'title': 'The book of the superiority of '
            'dogs over many of those who '
            'wear clothes',
            'year': 'c1978'
    }], 'QA567.2.E44 K53 1992': [
        {
            'author': 'Knapp, Anthony W',
            'call': 'QA567.2.E44 K53 1992',
            'collection': 'Stacks',
            'details': '',
            'directions': {
                'aisle': '52b',
                'building': 'Goldfarb',
                'floor': 2
            },
            'library': 'Main Library',
            'title': 'Elliptic curves',
            'year': '1992'
    }], 'birds': [
        {
            'author': 'Menaboni, Athos 1895- ; Sara (Arnold) Menaboni',
            'call': '+ QL681 .M49',
            'collection': 'Stacks',
            'details': '',
            'directions': {
                'aisle': '3a',
                'building': 'Goldfarb',
                'floor': 2
            },
            'library': 'Main Library',
            'title': 'Birds, ',
            'year': '1950'
        }, {
            'author': 'Anderson, Walter Inglis 1903-1965 ; Mary '
            'Anderson Pickard',
            'call': 'N6537.A48 A4 1990',
            'collection': 'Stacks',
            'details': '',
            'directions': {
                'aisle': '21a',
                'building': 'Farber',
                'floor': 4
            },
            'library': 'Main Library',
            'title': 'Birds',
            'year': 'c1990'
        }, {
            'author': 'Paglia, Camille 1947-',
            'call': 'PN1997.B547 P35 1998',
            'collection': 'Stacks',
            'details': '',
            'directions': {
                'aisle': '13a',
                'building': 'Goldfarb',
                'floor': 2
            },
            'library': 'Main Library',
            'title': 'The Birds',
            'year': '1998'
        }, {
            'author': 'Aristophanes ; Dudley Fitts 1903-; Marian '
            'Parry; Bert Clarke printer.; David Way '
            'printer.; Limited Editions Club publisher.; '
            'Thistle Press printer.',
            'call': 'Fine Press PA3877 .A8 1959',
            'collection': 'SpecialCollections',
            'details': '',
            'directions': {
                'aisle': 'Request at Archives & Special '
                'Collections (M-F 9am-5pm) or '
                'email '
                'ascdepartment@brandeis.edu',
                'building': 'Goldfarb',
                'floor': 2
            },
            'library': 'Main Library',
            'title': 'The birds',
            'year': '1959'
        }, {
            'author': 'Aristophanes',
            'call': 'PA3875 .A8 1987',
            'collection': 'Stacks',
            'details': '',
            'directions': {
                'aisle': '6a',
                'building': 'Goldfarb',
                'floor': 2
            },
            'library': 'Main Library',
            'title': 'Birds',
            'year': '1987'
        }, {
            'author': 'Perse, Saint-John 1889-1975.',
            'call': 'PQ2623.E386 O7 1966',
            'collection': 'Stacks',
            'details': '',
            'directions': {
                'aisle': '18a',
                'building': 'Goldfarb',
                'floor': 2
            },
            'library': 'Main Library',
            'title': 'Birds, ',
            'year': '1966'
        }, {
            'author': 'Heinroth, Oskar 1871-1945 ; Katharina Heinroth',
            'call': 'QL673 .H413',
            'collection': 'Stacks',
            'details': '',
            'directions': {
                'aisle': '55b',
                'building': 'Goldfarb',
                'floor': 2
            },
            'library': 'Main Library',
            'title': 'The birds, ',
            'year': '1958'
        }, {
            'author': 'Vesaas, Tarjei 1897-1970',
            'call': 'PT9088.V6 B5',
            'collection': 'Stacks',
            'details': '',
            'directions': {
                'aisle': '50a',
                'building': 'Goldfarb',
                'floor': 2
            },
            'library': 'Main Library',
            'title': 'The birds.',
            'year': '1969'
        }, {
            'author': 'Jonathan Elphick',
            'call': 'QL698.9 .A88 2007',
            'collection': 'Stacks',
            'details': '',
            'directions': {
                'aisle': '55b',
                'building': 'Goldfarb',
                'floor': 2
            },
            'library': 'Main Library',
            'title': 'The atlas of bird migration : tracing the great '
            "journeys of the world's birds",
            'year': '2007'
        }, {
            'author': 'Buller, Walter Lawry Sir, 1838-1906. ; E. G '
            'Turbott (Evan Graham)',
            'call': '+ QL693 .B84 1967',
            'collection': 'Stacks',
            'details': '',
            'directions': {
                'aisle': '3a',
                'building': 'Goldfarb',
                'floor': 2
            },
            'library': 'Main Library',
            'title': "Buller's birds of New Zealand; a history of the "
            'birds of New Zealand.',
            'year': '1967'
    }], 'jellyfish': [
        {
            'author': 'Yael Fogiel; Laetitia Gonzalez; Amir '
            'Harel; Ayelet Kait; Shirah Gefen; Etgar '
            'Keret 1967-; Sarah Adler; Nikol Leidman; '
            'Gera Sandler; Noa Knoller; Ma-Nenita de '
            'Latorre; Zharira Charifai; Meduzot Limited '
            'Partnership (Firm); Films du Poisson '
            '(Firm); Lama Productions Ltd.; Israeli '
            'Film Fund (Firm); Arte France cinéma '
            '(Firm); Studio Canal+.; Zeitgeist Films.',
            'call': 'PN1997 .J41 2008',
            'collection': 'Media Browsing Collection',
            'details': '',
            'directions': {
                'aisle': 'DVD Collection 2',
                'building': 'Goldfarb',
                'floor': 1
            },
            'library': 'Main Library',
            'title': 'Jellyfish',
            'year': '2008'
        }, {
            'author': 'Isaac Brown (Isaac Oviatt); Eric Flagg; '
            'University of Florida. Documentary '
            'Institute.; Jellyfish Smack Productions.',
            'call': 'SB433 .G56 2006',
            'collection': 'Media Browsing Collection',
            'details': '',
            'directions': {
                'aisle': 'DVD Collection 2',
                'building': 'Goldfarb',
                'floor': 1
            },
            'library': 'Main Library',
            'title': 'Gimme green',
            'year': 'c2006'
        }, {
            'author': 'Winsor, Mary P',
            'call': 'QL362.5 .W56',
            'collection': 'Stacks',
            'details': '',
            'directions': {
                'aisle': '55b',
                'building': 'Goldfarb',
                'floor': 2
            },
            'library': 'Main Library',
            'title': 'Starfish, jellyfish, and the order of life '
            ': issues in nineteenth-century science',
            'year': 'c1976'
        }, {
            'author': 'Kleeman, Alexandra author.',
            'call': 'PS3611.L44245 A6 2016',
            'collection': 'Stacks',
            'details': '',
            'directions': {
                'aisle': '47a',
                'building': 'Goldfarb',
                'floor': 2
            },
            'library': 'Main Library',
            'title': 'Intimations : stories',
            'year': '2016'
        }, {
            'author': 'Verkuyten, M',
            'call': 'HM1271 .V478 2014',
            'collection': 'Stacks',
            'details': '',
            'directions': {
                'aisle': '20b',
                'building': 'Goldfarb',
                'floor': 1
            },
            'library': 'Main Library',
            'title': 'Identity and cultural diversity : what '
            'social psychology can teach us',
            'year': '2014'
        }, {
            'author': 'Pieribone, Vincent ; David F Gruber',
            'call': 'QH641 .P54 2005',
            'collection': 'Stacks',
            'details': '',
            'directions': {
                'aisle': '55b',
                'building': 'Goldfarb',
                'floor': 2
            },
            'library': 'Main Library',
            'title': 'Aglow in the dark : the revolutionary '
            'science of biofluorescence',
            'year': 'c2005'
        }, {
            'author': 'Felker, Craig C. 1959-',
            'call': 'V245 .F45 2007',
            'collection': 'Stacks',
            'details': '',
            'directions': {
                'aisle': '63b',
                'building': 'Goldfarb',
                'floor': 2
            },
            'library': 'Main Library',
            'title': 'Testing American sea power : U.S. Navy '
            'strategic exercises, 1923-1940',
            'year': 'c2007'
        }, {
            'author': 'Fleisher, Paul ; Brandeis University.',
            'call': 'LD571 .B743 no.47',
            'collection': 'University Archives',
            'details': '',
            'directions': {
                'aisle': 'Request at Archives & '
                'Special Collections (M-F '
                '9am-5pm) or email '
                'ascdepartment@brandeis.edu',
                'building': 'Goldfarb',
                'floor': 2
            },
            'library': 'Main Library',
            'title': 'Life cycles of a dozen diverse creatures',
            'year': 'c1996'
        }, {
            'author': 'Scott F. Gilbert 1949-; Anne M. Raunio '
            '1950-',
            'call': 'QL955 .E43 1997',
            'collection': '(Use "Request" for Pickup at Main '
            'Library)',
            'details': '',
            'directions': {
                'aisle': '',
                'building': 'Goldfarb / Farber',
                'floor': ''
            },
            'library': 'Storage',
            'title': 'Embryology : constructing the organism',
            'year': 'c1997'
        }, {
            'author': 'Peter C Kunze (Peter Christopher), editor.',
            'call': 'PN1998.3.A526 F57 2014',
            'collection': 'Stacks',
            'details': '',
            'directions': {
                'aisle': '13a',
                'building': 'Goldfarb',
                'floor': 2
            },
            'library': 'Main Library',
            'title': 'The films of Wes Anderson : critical essays '
            'on an Indiewood icon',
            'year': '2014'
    }], 'soviet art': [
        {
            'author': 'Katalin Bakos; Österreichisches Museum '
            'für Angewandte Kunst; Mücsarnok '
            '(Budapest, Hungary)',
            'call': 'N6988 .K82 1988',
            'collection': 'Stacks',
            'details': '',
            'directions': {
                'aisle': '22b',
                'building': 'Farber',
                'floor': 4
            },
            'library': 'Main Library',
            'title': 'Kunst und Revolution : Russische und '
            'Sowjetische Kunst 1910-1932 = Art and '
            'revolution : Russian and Soviet art '
            '1910-1932',
            'year': 'c1988'
        }, {
            'author': 'Levent, Nina Sobol 1971-',
            'call': 'N8250 .L48 2004',
            'collection': 'Stacks',
            'details': '',
            'directions': {
                'aisle': '24a',
                'building': 'Farber',
                'floor': 4
            },
            'library': 'Main Library',
            'title': 'Healthy spirit in a healthy body : '
            'representations of the sports body in '
            'Soviet art of the 1920s and 1930s',
            'year': 'c2004'
        }, {
            'author': 'David A. Ross 1949-; Tacoma Art Museum.; '
            'Institute of Contemporary Art (Boston, '
            'Mass.)',
            'call': 'N6988.5.C62 B482 1990',
            'collection': 'VHS Media Collection',
            'details': '',
            'directions': {
                'aisle': 'VHS Collection',
                'building': 'Goldfarb',
                'floor': 1
            },
            'library': 'Main Library',
            'title': 'Between spring and summer Soviet '
            'conceptual art',
            'year': '1990'
        }, {
            'author': 'Alla Rosenfeld; Norton T Dodge; Jane '
            'Voorhees Zimmerli Art Museum',
            'call': 'N6988 .N66 1995',
            'collection': 'Stacks',
            'details': '',
            'directions': {
                'aisle': '22b',
                'building': 'Farber',
                'floor': 4
            },
            'library': 'Main Library',
            'title': 'Nonconformist art : the Soviet experience, '
            '1956-1986 : the Norton and Nancy Dodge '
            'Collection, the Jane Voorhees Zimmerli Art '
            'Museum, Rutgers, the State University of '
            'New Jersey',
            'year': 'c1995'
        }, {
            'author': 'David A. Ross 1949-; Tacoma Art Museum; '
            'Institute of Contemporary Art (Boston, '
            'Mass.); Des Moines Art Center',
            'call': 'N6988.5.C63 B48 1990',
            'collection': 'Stacks',
            'details': '',
            'directions': {
                'aisle': '22b',
                'building': 'Farber',
                'floor': 4
            },
            'library': 'Main Library',
            'title': 'Between spring and summer : Soviet '
            'conceptual art in the era of late '
            'communism',
            'year': 'c1990'
        }, {
            'author': 'Conway, William Martin Sir, 1856-1937',
            'call': 'N6981 .C6',
            'collection': 'Stacks',
            'details': '',
            'directions': {
                'aisle': '22b',
                'building': 'Farber',
                'floor': 4
            },
            'library': 'Main Library',
            'title': 'Art treasures in soviet Russia,',
            'year': '1925'
        }, {
            'author': 'Razina, T. M (Tatʹi︠a︡na Mikhaĭlovna) ; '
            'N. V Cherkasova; Alexander Kantsedikas',
            'call': 'NK1044 .R39 1990',
            'collection': 'Stacks',
            'details': '',
            'directions': {
                'aisle': '36a',
                'building': 'Farber',
                'floor': 4
            },
            'library': 'Main Library',
            'title': 'Folk art in the Soviet Union',
            'year': '1990'
        }, {
            'author': 'Erofeev, Andrei',
            'call': 'N6988 .E76 1995',
            'collection': 'Stacks',
            'details': '',
            'directions': {
                'aisle': '22b',
                'building': 'Farber',
                'floor': 4
            },
            'library': 'Main Library',
            'title': 'Non-official art : Soviet artists of the '
            '1960s',
            'year': 'c1995'
        }, {
            'author': 'Khidekel, Regina',
            'call': 'N6988.5.S67 K55 1998',
            'collection': 'Stacks',
            'details': '',
            'directions': {
                'aisle': '22b',
                'building': 'Farber',
                'floor': 4
            },
            'library': 'Main Library',
            'title': "It's the real thing : Soviet & post-Soviet "
            'sots art & American pop art',
            'year': 'c1998'
    }], 'toads': [
        {
            'author': 'Dickerson, Mary Cynthia 1866-1923.',
            'call': 'QL651 .D54 1969',
            'collection': 'Stacks',
            'details': '',
            'directions': {
                'aisle': '55b',
                'building': 'Goldfarb',
                'floor': 2
            },
            'library': 'Main Library',
            'title': 'The frog book; North American toads and frogs, '
            'with a study of the habits and life histories '
            'of those of the northeastern States.',
            'year': '1969'
        }, {
            'author': 'Wright, Anna (Allen) 1882- ; Albert Hazen '
            'Wright 1879-',
            'call': 'QL668.E2 W8 1949',
            'collection': 'Stacks',
            'details': '',
            'directions': {
                'aisle': '55b',
                'building': 'Goldfarb',
                'floor': 2
            },
            'library': 'Main Library',
            'title': 'Handbook of frogs and toads of the United '
            'States and Canada,',
            'year': '1949'
        }, {
            'author': 'Iroh, Eddie',
            'call': 'PR9387.9.I7 T6',
            'collection': 'Stacks',
            'details': '',
            'directions': {
                'aisle': '38a',
                'building': 'Goldfarb',
                'floor': 2
            },
            'library': 'Main Library',
            'title': 'Toads of war',
            'year': '1979'
        }, {
            'author': 'Ike, Vincent Chukwuemeka 1931-',
            'call': 'PR9387.9.I44 T6 1991',
            'collection': 'Stacks',
            'details': '',
            'directions': {
                'aisle': '38a',
                'building': 'Goldfarb',
                'floor': 2
            },
            'library': 'Main Library',
            'title': 'Toads for supper',
            'year': '1991'
        }, {
            'author': 'McCorkle, Jill 1958-',
            'call': 'PS3563.C3444 C74 2001',
            'collection': 'Stacks',
            'details': '',
            'directions': {
                'aisle': '46a',
                'building': 'Goldfarb',
                'floor': 2
            },
            'library': 'Main Library',
            'title': 'Creatures of habit : stories',
            'year': '2001'
        }, {
            'author': 'Whitebrook, Maureen',
            'call': 'PR830.P6 W48 1995',
            'collection': 'Stacks',
            'details': '',
            'directions': {
                'aisle': '27a',
                'building': 'Goldfarb',
                'floor': 2
            },
            'library': 'Main Library',
            'title': 'Real toads in imaginary gardens : narrative '
            'accounts of liberalism',
            'year': 'c1995'
        }, {
            'author': 'Gregory, Elizabeth',
            'call': 'PS310.M57 G74 1995',
            'collection': 'Stacks',
            'details': '',
            'directions': {
                'aisle': '39b',
                'building': 'Goldfarb',
                'floor': 2
            },
            'library': 'Main Library',
            'title': 'Quotation and modern American poetry : '
            'imaginary gardens with real toads',
            'year': '1995'
        }, {
            'author': 'Woolley, Bryan',
            'call': 'PS3573.O67 B75 1993',
            'collection': 'Stacks',
            'details': '',
            'directions': {
                'aisle': '47a',
                'building': 'Goldfarb',
                'floor': 2
            },
            'library': 'Main Library',
            'title': 'The bride wore crimson and other stories',
            'year': 'c1993'
        }, {
            'author': 'Grahame, Kenneth 1859-1932. ; Limited Editions '
            'Club.',
            'call': 'Restr PR4726 .W54 1940b',
            'collection': 'Special Collections',
            'details': '',
            'directions': {
                'aisle': 'Request at Archives & Special '
                'Collections (M-F 9am-5pm) or '
                'email '
                'ascdepartment@brandeis.edu',
                'building': 'Goldfarb',
                'floor': 2
            },
            'library': 'Main Library',
            'title': 'The wind in the willows',
            'year': '1940'
        }, {
            'author': 'Levine, George Lewis',
            'call': 'PR468.S34 L48 2008',
            'collection': 'Stacks',
            'details': '',
            'directions': {
                'aisle': '26a',
                'building': 'Goldfarb',
                'floor': 2
            },
            'library': 'Main Library',
            'title': 'Realism, ethics and secularism : essays on '
            'Victorian literature and science',
            'year': '2008'
        }
    ]
}

def search(term, max_count=10):
    global results
    ret = results[term]
    if len(ret) > max_count:
        return ret[:max_count]
    else:
        return ret

# hoooo my god this cant be good
goldfinder.search = search
goldfinder.get_directions.__globals__['search'] = search

def _test_building(expected, directions):
    mock = { 'maps': [{
                'directions': directions,
    }]}
    assert expected == goldfinder.get_building(mock)

def test_building():
    _test_building('Goldfarb', 'Please proceed to the mezzanine level of the '
        'Goldfarb building of the Brandeis University Library')
    _test_building('Goldfarb', 'Please proceed to the first floor of Goldfarb '
        'building of the Brandeis University Library')
    _test_building('Farber', 'Please proceed to the fourth floor of the Farber '
            'building of the Brandeis University Library.')
    _test_building('Goldfarb / Farber', '')

def test_pretty():
    assert (goldfinder.pretty(search('marx')[0])
        == 'Marx (c2004, Collier, Andrew 1944-)\n'
        'Goldfarb M, 3a: B3305.M74 C56 2004')

def test_integration_local():
    assert (
'''1. Jellyfish (2008, Yael Fogiel; Laetitia Gonzalez; Amir Harel; Ayelet Kait;
   Shirah Gefen; Etgar Keret 1967-; Sarah Adler; Nikol Leidman; Gera Sandler;
   Noa Knoller; Ma-Nenita de Latorre; Zharira Charifai; Meduzot Limited
   Partnership (Firm); Films du Poisson (Firm); Lama Productions Ltd.; Israeli
   Film Fund (Firm); Arte France cinéma (Firm); Studio Canal+.; Zeitgeist
   Films.)
   Goldfarb 1, DVD Collection 2: PN1997 .J41 2008
2. Gimme green (c2006, Isaac Brown (Isaac Oviatt); Eric Flagg; University of
   Florida. Documentary Institute.; Jellyfish Smack Productions.)
   Goldfarb 1, DVD Collection 2: SB433 .G56 2006
3. Starfish, jellyfish, and the order of life : issues in nineteenth-century
   science (c1976, Winsor, Mary P)
   Goldfarb 2, 55b: QL362.5 .W56'''
    == goldfinder.get_directions(['jellyfish'], amount=3))

    assert (
'''
       JELLYFISH
       ---------
1. Jellyfish (2008, Yael Fogiel; Laetitia Gonzalez; Amir Harel; Ayelet Kait;
   Shirah Gefen; Etgar Keret 1967-; Sarah Adler; Nikol Leidman; Gera Sandler;
   Noa Knoller; Ma-Nenita de Latorre; Zharira Charifai; Meduzot Limited
   Partnership (Firm); Films du Poisson (Firm); Lama Productions Ltd.; Israeli
   Film Fund (Firm); Arte France cinéma (Firm); Studio Canal+.; Zeitgeist
   Films.)
   Goldfarb 1, DVD Collection 2: PN1997 .J41 2008
2. Gimme green (c2006, Isaac Brown (Isaac Oviatt); Eric Flagg; University of
   Florida. Documentary Institute.; Jellyfish Smack Productions.)
   Goldfarb 1, DVD Collection 2: SB433 .G56 2006
3. Starfish, jellyfish, and the order of life : issues in nineteenth-century
   science (c1976, Winsor, Mary P)
   Goldfarb 2, 55b: QL362.5 .W56

       TOADS
       -----
4. The frog book; North American toads and frogs, with a study of the habits
   and life histories of those of the northeastern States. (1969, Dickerson,
   Mary Cynthia 1866-1923.)
   Goldfarb 2, 55b: QL651 .D54 1969
5. Handbook of frogs and toads of the United States and Canada, (1949, Wright,
   Anna (Allen) 1882- ; Albert Hazen Wright 1879-)
   Goldfarb 2, 55b: QL668.E2 W8 1949
6. Toads of war (1979, Iroh, Eddie)
   Goldfarb 2, 38a: PR9387.9.I7 T6

       BIRDS
       -----
7. Birds, (1950, Menaboni, Athos 1895- ; Sara (Arnold) Menaboni)
   Goldfarb 2, 3a: + QL681 .M49
8. Birds (c1990, Anderson, Walter Inglis 1903-1965 ; Mary Anderson Pickard)
   Farber 4, 21a: N6537.A48 A4 1990
9. The Birds (1998, Paglia, Camille 1947-)
   Goldfarb 2, 13a: PN1997.B547 P35 1998
'''
    == goldfinder.get_directions(['jellyfish', 'toads', 'birds'],
        amount=3, separators=True, continue_numbering=True))
